// Root Gradle build file aligned with React Native 0.74.7
// Uses the plugins DSL with versions managed here and plugin resolution in settings.gradle

plugins {
  id("com.android.application") version "8.4.2" apply false
  id("com.android.library") version "8.4.2" apply false
  id("org.jetbrains.kotlin.android") version "1.9.24" apply false
  // The React Native Gradle plugin is provided via includeBuild in settings.gradle
  // Do not set a version here; it is resolved from node_modules/react-native-gradle-plugin
  // Made optional to prevent build failures in CI/CD when plugin is not available
  // id("com.facebook.react") apply false  // Commented out - applied in app/build.gradle if available
}

ext {
  buildToolsVersion = "34.0.0"
  minSdkVersion = 23
  compileSdkVersion = 34
  targetSdkVersion = 34
  kotlinVersion = "1.9.24"
  javaVersion = JavaVersion.VERSION_17
}

// Project-level repositories (repositoriesMode is PREFER_PROJECT)
allprojects {
  repositories {
    mavenCentral()
    google()
    // React Native and JSC artifacts - made optional for CI/CD
    def reactNativeDir = new File("$rootDir/../node_modules/react-native/android")
    if (reactNativeDir.exists()) {
      maven { url("$rootDir/../node_modules/react-native/android") }
    }
    def jscDir = new File("$rootDir/../node_modules/jsc-android/dist")
    if (jscDir.exists()) {
      maven { url("$rootDir/../node_modules/jsc-android/dist") }
    }
  }
}
