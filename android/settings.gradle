// android/settings.gradle aligned with React Native 0.78.0

pluginManagement {
  repositories {
    gradlePluginPortal()
    mavenCentral()
    google()
  }
  // Provides the React Native Gradle plugins: com.facebook.react and com.facebook.react.rootproject
  def reactNativeGradlePlugin = new File("../node_modules/@react-native/gradle-plugin")
  if (reactNativeGradlePlugin.exists()) {
    includeBuild("../node_modules/@react-native/gradle-plugin")
  } else {
    // Fallback for CI/CD environments where node_modules might not be in parent directory
    def altPath = new File(rootDir, "../node_modules/@react-native/gradle-plugin")
    if (altPath.exists()) {
      includeBuild(altPath.absolutePath)
    }
  }
}

dependencyResolutionManagement {
  repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
  repositories {
    google()
    mavenCentral()
    maven { url "https://repo1.maven.org/maven2/" }
    maven { url "https://www.jitpack.io" }
    // React Native and JSC artifacts - made optional for CI/CD
    def reactNativeDir = new File("$rootDir/../node_modules/react-native/android")
    if (reactNativeDir.exists()) {
      maven { url("$rootDir/../node_modules/react-native/android") }
    }
    def jscDir = new File("$rootDir/../node_modules/jsc-android/dist")
    if (jscDir.exists()) {
      maven { url("$rootDir/../node_modules/jsc-android/dist") }
    }
  }
}

rootProject.name = "OCRMobileSDK"
include(":app")

// React Native CLI Autolinking
apply from: file("../node_modules/@react-native-community/cli-platform-android/native_modules.gradle"); applyNativeModulesSettingsGradle(settings)